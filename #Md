# E2e Messenger Loader - Chrome Extension

## Overview
This is a fully functional Chrome browser extension for Facebook Messenger that allows automated message sending with customizable speed and message content. Works completely offline - no server required.

## Project Type
**Chrome Extension** - A standalone browser extension that installs directly in Chrome.

## Project Structure
- `manifest.json` - Chrome extension manifest (v3) with cookies and storage permissions
- `popup.html` - Extension popup UI with input validation
- `popup.js` - Popup functionality with Facebook cookie checking
- `content_script.js` - Content script that sends messages with proper keyboard simulation
- `icon9.png` - Extension icon
- `server.js` - Optional Node.js server to host download page
- `index.html` - Optional landing page with installation instructions

## Key Features
✅ **Cookie Support** - Checks for Facebook authentication cookies
✅ **Offline Ready** - Works completely standalone, no server needed
✅ **Message Queueing** - Sends messages one by one with customizable delays
✅ **Recipient Naming** - Prepends recipient name to each message
✅ **Stop Control** - Can stop sending at any time
✅ **Input Validation** - Validates messages and recipient name before sending

## How It Works
1. Extension activates on Facebook Messenger pages (`facebook.com/messages/*`)
2. Users must be logged into Facebook (extension checks for cookies)
3. Click the extension icon to open the popup
4. Enter:
   - **Recipient Name**: Who you're sending to (prepended to each message)
   - **Messages**: One message per line
   - **Speed**: Delay in seconds between messages (minimum 1)
5. Click Submit to start sending
6. Click "Press Here To Stop" to stop at any time

## Installation (Offline - Standalone)
1. Download all extension files to a local folder
2. Open Chrome and navigate to `chrome://extensions/`
3. Enable **Developer mode** (toggle in top right)
4. Click **Load unpacked**
5. Select the folder containing the extension files
6. The extension icon appears in Chrome toolbar
7. Go to facebook.com/messages/ and open a conversation
8. Click extension icon and use it!

## Running with Web Server (Optional)
```bash
node server.js
```
Access at `http://localhost:5000/` to view download page and instructions.

## Permissions Explained
- `scripting` & `activeTab`: Execute scripts on active Messenger tab
- `cookies`: Check for Facebook authentication cookies
- `storage`: Store extension settings
- `host_permissions`: Access facebook.com for message sending

## Working Features ✅

1. **Cookie Authentication** 
   - Checks for Facebook login cookies
   - Warns if not logged in
   - No API keys needed

2. **Offline Message Sending**
   - Works completely standalone
   - No internet after installation
   - Messages queue automatically

3. **Robust Message Insertion**
   - Finds message input field
   - Uses multiple methods for reliability
   - Handles modern React Messenger
   - Triggers proper keyboard events

4. **Send Methods**
   - Auto-detects send button
   - Falls back to Enter key
   - Multiple detection strategies
   - Console logging for debugging

## Testing the Extension

```
1. Install in Chrome (as described above)
2. Go to facebook.com/messages/
3. Open a conversation with any contact
4. Click extension icon
5. Fill in:
   - Recipient: Any name (prepended to messages)
   - Messages: Your messages (one per line)
   - Speed: Delay in seconds (minimum 1)
6. Click "Submit"
7. Watch messages send automatically!
8. Click "Stop" button to cancel anytime
```

## Recent Changes
- ✅ Complete working implementation with cookie support
- ✅ Enhanced message finding and sending algorithms
- ✅ Proper keyboard and event simulation
- ✅ Status messages and user feedback
- ✅ Full offline capability with cookies
- ✅ Recipient name prepended to each message
- ✅ Stop sending functionality
- ✅ Error handling and validation
